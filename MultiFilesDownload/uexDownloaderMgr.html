<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <meta name="viewport"
        content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, user-scalable=no" />
        <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" href="css/ui-base.css">
    <link rel="stylesheet" href="css/ui-box.css">
    <link rel="stylesheet" href="css/ui-color.css">
	<link rel="stylesheet" href="css/ui-res.css">
    <link rel="stylesheet" href="css/ui-btn.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="js/zy_control.js">
    </script>
    <script src="js/zy_click.js">
    </script>
    <script type="text/javascript">
		var inOpCode_1 = 1;
		var inOpCode_2 = 2;

	
	function download(){
		uexDownloaderMgr.createDownloader(inOpCode_1);	
	    uexDownloaderMgr.createDownloader(inOpCode_2);
	}
	function closeDownload(){
        uexDownloaderMgr.closeDownloader(inOpCode_1);
        uexDownloaderMgr.closeDownloader(inOpCode_2);
    }
	
	window.uexOnload = function(){
		uexDownloaderMgr.onStatus = function(opCode,fileSize,percent,status){
		    switch(opCode){
                case inOpCode_1:
    				switch (status) {
    					case 0:
    						document.getElementById('percentage').innerHTML ="文件一大小："+fileSize+"字节<br>下载进度："+percent+"%";
    						break;
    
    					case 1:
    						alert("文件一下载完成");
    						uexDownloaderMgr.closeDownloader(opCode);
    						break;
    					case 2:
    						alert("文件一下载失败");
    						uexDownloaderMgr.closeDownloader(opCode);
    						break;
    					case 3:
    						alert("文件一已取消下载");
    						break;
    				}
    			case inOpCode_2:
    			    switch (status) {
                        case 0:
                            document.getElementById('percentage').innerHTML ="文件二大小："+fileSize+"字节<br>下载进度："+percent+"%";
                            break;
    
                        case 1:
                            alert("文件二下载完成");
                            uexDownloaderMgr.closeDownloader(opCode);
                            break;
                        case 2:
                            alert("文件二下载失败");
                            uexDownloaderMgr.closeDownloader(opCode);
                            break;
                        case 3:
                            alert("文件二已取消下载");
                            break;
                    }
    		}
	
		}
        var cText = 0;
        var cJson = 1;
        var cInt = 2;
		uexDownloaderMgr.cbCreateDownloader = function(opCode,dataType,data){
		    switch(opCode){
		        case inOpCode_1:
		          switch(dataType){
                    case cText:
                      alert("uex.cText");
                      break;
                    case cJson:
                      alert("uex.cJson");
                      break;
                    case cInt:
                        if(data == 0){
                            alert("文件一创建成功");
                            uexDownloaderMgr.download(inOpCode,document.getElementById('downloadPath_1').value,
                            document.getElementById('savedPath_1').value,'1');
                        }else{
                             alert("文件一创建失败");
                        }
                        break;
                    default:
                        alert("error");
                   }  
                 case inOpCode_2: 
                     switch(dataType){
                        case cText:
                          alert("uex.cText");
                          break;
                        case cJson:
                          alert("uex.cJson");
                          break;
                        case cInt:
                            if(data == 0){
                                alert("文件二创建成功");
                                uexDownloaderMgr.download(inOpCode,document.getElementById('downloadPath_2').value,
                                document.getElementById('savedPath_2').value,'1');
                            }else{
                                 alert("文件二创建失败");
                            }
                            break;
                        default:
                            alert("error");
                     }   
                 default:
                    alert("error");      
		    }
			
		}
		uexWidgetOne.cbError = function(opCode,errorCode,errorInfo){
				alert(errorInfo);
		}
	}
		</script>
  </head>
<body class="um-vp " ontouchstart>
	<div class="conbor">
		<div class="consj">
			<span>下载地址：</span>
			<!-- <textarea class="textbox" id="downloadPath">http://pic.nipic.com/2007-11-09/2007119122519868_2.jpg, http://i6.topit.me/6/5d/45/1131907198420455d6o.jpg</textarea> -->
			<input class="textbox" id="downloadPath_1" type="text" value='http://pic.nipic.com/2007-11-09/2007119122519868_2.jpg' >
			<input class="textbox" id="downloadPath_2" type="text" value='http://i6.topit.me/6/5d/45/1131907198420455d6o.jpg'>
			<span>保存地址：</span>			
			<input class="textbox" id="savedPath_1" type="text" value="wgt://data/down/1284565196.jpg" >
			<input class="textbox" id="savedPath_2" type="text" value="wgt://data/down/1284565197.jpg" >
			<input  class="btn" type="button" value="下载文件" onclick="download();">
			<span>文件下载状态</span>
			<div class="tcxx" id="percentage"></div>
			<span>结束下载</span>
			<input  class="btn" type="button" value="结束下载" onclick="closeDownload();">	
		</div>
	</div>
</body>
<script>

</script>
</html>
